(self["webpackChunkweather"]=self["webpackChunkweather"]||[]).push([[234],{9383:function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"> <path d="m292.2 256 109.9-109.9c10-10 10-26.2 0-36.2s-26.2-10-36.2 0l-109.9 109.9-109.9-109.9c-10-10-26.2-10-36.2 0s-10 26.2 0 36.2l109.9 109.9-109.9 109.9c-10 10-10 26.2 0 36.2 5 5 11.55 7.5 18.1 7.5s13.1-2.5 18.1-7.5l109.9-109.9 109.9 109.9c5 5 11.55 7.5 18.1 7.5s13.1-2.5 18.1-7.5c10-10 10-26.2 0-36.2z"/> </svg>';e.exports=t},5055:function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"> <path d="m233.331 467.624c57.007 0 110.886-20.317 153.391-57.507l98.065 96.335c3.115 3.06 7.165 4.586 11.212 4.586 4.143 0 8.283-1.599 11.415-4.788 6.192-6.304 6.103-16.434-.201-22.626l-97.875-96.147c37.075-42.473 57.325-96.269 57.325-153.184 0-62.325-24.271-120.919-68.342-164.99-44.07-44.07-102.665-68.341-164.99-68.341-62.324 0-120.919 24.271-164.989 68.341-44.071 44.071-68.342 102.665-68.342 164.99s24.271 120.919 68.342 164.99c44.07 44.071 102.665 68.341 164.989 68.341zm-142.362-375.694c39.25-39.25 90.807-58.874 142.362-58.874 51.557 0 103.113 19.625 142.363 58.874 78.499 78.499 78.499 206.227 0 284.726-78.498 78.499-206.224 78.5-284.726 0-78.498-78.499-78.498-206.227.001-284.726z"/> </svg>';e.exports=t},2869:function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 507.451 507.45"> <path d="M440.813,280.5c0-7.65,2.55-15.3,2.55-25.5s0-17.85-2.55-25.5l53.55-43.35c5.1-5.1,5.1-10.2,2.55-15.3l-51-89.25 c-2.55-2.55-7.649-5.1-15.3-2.55l-63.75,25.5c-12.75-10.2-28.05-17.85-43.35-25.5l-10.2-66.3C315.863,5.1,308.212,0,303.113,0 h-102c-5.101,0-12.75,5.1-12.75,10.2l-10.2,68.85c-15.3,5.1-28.05,15.3-43.35,25.5l-61.2-25.5c-7.65-2.55-12.75,0-17.851,5.1 l-51,89.25c-2.55,2.55,0,10.2,5.1,15.3l53.55,40.8c0,7.65-2.55,15.3-2.55,25.5s0,17.85,2.55,25.5l-53.55,43.35 c-5.1,5.101-5.1,10.2-2.55,15.301l51,89.25c2.55,2.55,7.649,5.1,15.3,2.55l63.75-25.5c12.75,10.2,28.05,17.85,43.35,25.5 l10.2,66.3c0,5.1,5.1,10.2,12.75,10.2h102c5.101,0,12.75-5.101,12.75-10.2l10.2-66.3c15.3-7.65,30.6-15.3,43.35-25.5l63.75,25.5 c5.101,2.55,12.75,0,15.301-5.101l51-89.25c2.55-5.1,2.55-12.75-2.551-15.3L440.813,280.5z M252.113,344.25 c-48.45,0-89.25-40.8-89.25-89.25s40.8-89.25,89.25-89.25s89.25,40.8,89.25,89.25S300.563,344.25,252.113,344.25z"/> </svg>';e.exports=t},9234:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Jt}});s(3948);var r=s(3396),a=s(7139),i=s(9242);const n={class:"main"},o={class:"main__welcome-content main__wrapper"},h={class:"main__weather-content main__wrapper"},c={class:"main__weather-right"};function l(e,t,s,l,u,d){const m=(0,r.up)("welcome-card"),w=(0,r.up)("scroll-container"),v=(0,r.up)("weather-card-list"),p=(0,r.up)("weather-menu");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",{class:(0,a.C_)(["main__welcome",d.welcomeClasses])},[(0,r.Wm)(w,{"class-bar-y":"main__scrollbar-y","dynamic-size":!0},{default:(0,r.w5)((()=>[(0,r._)("div",o,[(0,r.Wm)(m)])])),_:1})],2),(0,r._)("div",{class:(0,a.C_)(["main__weather",d.weatherClasses])},[(0,r.Wm)(w,{"class-bar-y":"main__scrollbar-y","dynamic-size":!0},{default:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r._)("div",{class:"main__weather-left",onTransitionend:t[0]||(t[0]=(0,i.iM)(((...e)=>d.handlerWeatherLeftTransitionend&&d.handlerWeatherLeftTransitionend(...e)),["self"]))},[(0,r.Wm)(v)],32),(0,r._)("div",c,[(0,r.Wm)(p)])])])),_:1})],2)])}const u={class:"scroll-container"},d={class:"scroll-container__content",ref:"content"};function m(e,t,s,n,o,h){return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",{class:(0,a.C_)(["scroll-container__wrapper",s.classWrapper]),ref:"wrapper"},[(0,r._)("div",{class:(0,a.C_)(["scroll-container__inner",s.classInner]),onScroll:t[0]||(t[0]=(...e)=>h.eventScroll&&h.eventScroll(...e)),ref:"inner"},[(0,r._)("div",d,[(0,r.WI)(e.$slots,"default")],512)],34)],2),(0,r._)("div",{class:(0,a.C_)(["scroll-container__bar-x",[s.classBarX,{active:o.elSize.contentView.w>o.elSize.wrapper.w&&s.showBar}]]),ref:"barX"},[(0,r._)("div",{class:(0,a.C_)(["scroll-container__thumb-x",[s.classThumbX,{move:"x"===o.thumbStartMove.type}]]),"data-type":"x",onMousedown:t[1]||(t[1]=(0,i.iM)(((...e)=>h.eventThumbMouseDown&&h.eventThumbMouseDown(...e)),["prevent"])),onTouchstart:t[2]||(t[2]=(0,i.iM)(((...e)=>h.eventThumbTouchStart&&h.eventThumbTouchStart(...e)),["prevent"])),ref:"thumbX"},null,34)],2),(0,r._)("div",{class:(0,a.C_)(["scroll-container__bar-y",[s.classBarY,{active:o.elSize.contentView.h>o.elSize.wrapper.h&&s.showBar}]]),ref:"barY"},[(0,r._)("div",{class:(0,a.C_)(["scroll-container__thumb-y",[s.classThumbY,{move:"y"===o.thumbStartMove.type}]]),"data-type":"y",onMousedown:t[3]||(t[3]=(0,i.iM)(((...e)=>h.eventThumbMouseDown&&h.eventThumbMouseDown(...e)),["prevent"])),onTouchstart:t[4]||(t[4]=(0,i.iM)(((...e)=>h.eventThumbTouchStart&&h.eventThumbTouchStart(...e)),["prevent"])),ref:"thumbY"},null,34)],2)])}var w=s(8552),v={name:"ScrollContainer",props:{classWrapper:{type:String,default:""},classInner:{type:String,default:""},classBarX:{type:String,default:""},classThumbX:{type:String,default:""},classBarY:{type:String,default:""},classThumbY:{type:String,default:""},dynamicSize:{type:Boolean,default:!1},showBar:{type:Boolean,default:!0}},data(){return{sizeHiddenArea:100,resizeObserver:null,bindSetOffset:null,systemBar:{w:0,h:0},thumbSize:{min:20,x:0,y:0},elSize:{wrapper:{w:0,h:0},contentView:{w:0,h:0},contentOffset:{w:0,h:0}},thumbStartMove:{type:"",page:{x:0,y:0},scroll:{x:0,y:0}}}},methods:{eventScroll(){this.$emit("scroll"),this.updateThumbPosition()},eventThumbMouseDown(e){window.addEventListener("mousemove",this.eventThumbMouseMove),window.addEventListener("mouseup",this.eventThumbMoveEnd),this.thumbStart(e.target.dataset.type,e.pageX,e.pageY)},eventThumbTouchStart(e){window.addEventListener("touchmove",this.eventThumbTouchMove),window.addEventListener("touchend",this.eventThumbMoveEnd),this.thumbStart(e.target.dataset.type,e.touches[0].pageX,e.touches[0].pageY)},eventThumbMouseMove(e){this.thumbMove(e.pageX,e.pageY)},eventThumbTouchMove(e){this.thumbMove(e.touches[0].pageX,e.touches[0].pageY)},eventThumbMoveEnd(){this.thumbRemoveEventListeners(),this.thumbEnd()},thumbRemoveEventListeners(){window.removeEventListener("mousemove",this.eventThumbMouseMove),window.removeEventListener("mouseup",this.eventThumbMoveEnd),window.removeEventListener("touchmove",this.eventThumbTouchMove),window.removeEventListener("touchend",this.eventThumbMoveEnd)},thumbStart(e,t,s){"x"!==e&&"y"!==e||(this.thumbStartMove.type=e,this.thumbStartMove.page={x:t,y:s},this.thumbStartMove.scroll=this.getScroll())},thumbMove(e,t){const{barX:s,barY:r}=this.$refs,{contentView:a}=this.elSize,{type:i,page:n,scroll:o}=this.thumbStartMove,h=this.getScroll(),c="x"===i?(e-n.x)*(a.w/s.clientWidth)+o.x:h.x,l="y"===i?(t-n.y)*(a.h/r.clientHeight)+o.y:h.y;this.scrollTo(c,l,"auto")},thumbEnd(){this.thumbStartMove.type="",this.thumbStartMove.page={x:0,y:0},this.thumbStartMove.scroll={x:0,y:0}},getScroll(){return{x:this.$refs.inner.scrollLeft,y:this.$refs.inner.scrollTop}},scrollTo(e,t,s="smooth"){this.$refs.inner.scrollTo({left:e,top:t,behavior:s})},scrollBy(e,t,s="smooth"){this.$refs.inner.scrollBy({left:e,top:t,behavior:s})},updateElSize(){const{wrapper:e,content:t}=this.$refs,{elSize:s,systemBar:r,sizeHiddenArea:a}=this;s.wrapper.w=e.clientWidth,s.wrapper.h=e.clientHeight,s.contentOffset.w=t.clientWidth,s.contentOffset.h=t.clientHeight,s.contentView.w=t.clientWidth-a+r.w,s.contentView.h=t.clientHeight-a+r.h},checkResizingElements(){const{wrapper:e,content:t}=this.$refs,{elSize:s}=this;return e.clientWidth!==s.wrapper.w||e.clientHeight!==s.wrapper.h||t.clientWidth!==s.contentOffset.w||t.clientHeight!==s.contentOffset.h},setOffsetContent(){const{inner:e,content:t}=this.$refs,{systemBar:s,sizeHiddenArea:r}=this;s.w=e.offsetWidth-e.clientWidth,s.h=e.offsetHeight-e.clientHeight,t.style.paddingRight=r-s.w+"px",t.style.paddingBottom=r-s.h+"px"},setOffset(){this.checkResizingElements()&&(this.updateElSize(),this.updateThumbSize(),this.updateThumbPosition())},updateThumbPosition(){const{wrapper:e,barY:t,barX:s,thumbX:r,thumbY:a}=this.$refs,{elSize:i,thumbSize:n}=this,o=this.getScroll(),h=(s.clientWidth-n.x)*(o.x/(i.contentView.w-e.clientWidth)),c=(t.clientHeight-n.y)*(o.y/(i.contentView.h-e.clientHeight));r.style.transform=`translateX(${h}px)`,a.style.transform=`translateY(${c}px)`},updateThumbSize(){const{barY:e,barX:t,thumbX:s,thumbY:r}=this.$refs,{thumbSize:a,elSize:i}=this;a.x=Math.max(i.wrapper.w/i.contentView.w*t.clientWidth,a.min),a.y=Math.max(i.wrapper.h/i.contentView.h*e.clientHeight,a.min),s.style.width=`${a.x}px`,r.style.height=`${a.y}px`}},mounted(){this.showBar&&(this.dynamicSize?"ResizeObserver"in window?(this.resizeObserver=new ResizeObserver(this.setOffset),this.resizeObserver.observe(this.$refs.wrapper),this.resizeObserver.observe(this.$refs.content)):(this.bindSetOffset=this.setOffset.bind(this),w.ZP.ticker.add(this.bindSetOffset)):window.addEventListener("resize",this.setOffset)),this.setOffsetContent(),this.setOffset(),window.addEventListener("resize",this.setOffsetContent)},beforeUnmount(){window.removeEventListener("resize",this.setOffset),window.removeEventListener("resize",this.setOffsetContent),this.thumbRemoveEventListeners(),w.ZP.ticker.remove(this.bindSetOffset),null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},p=s(89);const _=(0,p.Z)(v,[["render",m]]);var f=_;const g={class:"welcome-card"},y={class:"welcome-card__content"},b={class:"welcome-card__icon"},S=(0,r._)("div",{class:"welcome-card__title"}," Погода ",-1),C={class:"welcome-card__form"},D={class:"welcome-card__search-services"},L=["onClick"];function $(e,t,s,i,n,o){const h=(0,r.up)("weather-icon"),c=(0,r.up)("search-form");return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",y,[(0,r._)("div",b,[(0,r.Wm)(h,{code:"10d"})]),S,(0,r._)("div",C,[(0,r.Wm)(c,{"mobile-result-static":!0}),(0,r._)("div",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.searchServicesOptions,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["welcome-card__search-services-btn",{active:t.value===o.searchServicesCurrent}]),onClick:s=>e.store_changeUserSetting({path:o.searchServicesPath,value:t.value})},(0,a.zw)(t.name),11,L)))),256))])])])])}s(1817);const x={class:"search-form"},M=["disabled","readonly"],W={key:0,class:"search-form__result-item search-form__result-error"},A={class:"search-form__result-error-text"},R={class:"search-form__result-error-button","data-type":"error-close"},E=["data-index"],T={class:"search-form__result-item-name"},z={class:"search-form__result-item-desc"},O={class:"search-form__icon"};function k(e,t,s,n,o,h){const c=(0,r.up)("svg-inline"),l=(0,r.up)("loader-points-line");return(0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("form",{class:(0,a.C_)(["search-form__body",{"search-form__body_static-mobile":s.mobileResultStatic}]),onSubmit:t[8]||(t[8]=(0,i.iM)((e=>h.eventPreHandler(e,h.eventSubmit)),["prevent"]))},[(0,r._)("input",{class:"search-form__input",type:"text",placeholder:"Введите город",spellcheck:"false",onInput:t[0]||(t[0]=e=>h.eventPreHandler(e,h.eventInput)),onKeydown:[t[1]||(t[1]=(0,i.D2)((0,i.iM)(((...e)=>h.eventArrowUp&&h.eventArrowUp(...e)),["exact","prevent"]),["up"])),t[2]||(t[2]=(0,i.D2)((0,i.iM)(((...e)=>h.eventArrowDown&&h.eventArrowDown(...e)),["exact","prevent"]),["down"]))],onFocusCapture:t[3]||(t[3]=e=>h.eventPreHandler(e,h.eventFocus)),onBlur:t[4]||(t[4]=e=>h.eventPreHandler(e,h.eventBlur)),disabled:o.weatherLoading,readonly:h.inputReadOnly,ref:"input"},null,40,M),(0,r._)("ul",{class:(0,a.C_)(["search-form__result",{active:h.isOpenResult}]),onMousedown:t[5]||(t[5]=(0,i.iM)(((...e)=>h.eventResultMousedown&&h.eventResultMousedown(...e)),["prevent"])),onMousemove:t[6]||(t[6]=(...e)=>h.eventResultMousemove&&h.eventResultMousemove(...e)),onMouseout:t[7]||(t[7]=(...e)=>h.eventResultMouseout&&h.eventResultMouseout(...e))},[h.errorText?((0,r.wg)(),(0,r.iD)("li",W,[(0,r._)("div",A,(0,a.zw)(h.errorText),1),(0,r._)("div",R,[(0,r.Wm)(c,{name:"close"})])])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.resultData,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:(0,a.C_)(["search-form__result-item",{active:t===o.activeResult}]),"data-type":"city","data-index":t},[(0,r._)("div",T,(0,a.zw)(e.name),1),(0,r._)("div",z,(0,a.zw)(e.description),1)],10,E)))),128))],34),(0,r._)("div",O,[(0,r.Wm)(c,{name:"search"})]),(0,r.Wm)(l,{class:"search-form__loader","class-point":"search-form__loader-point",play:o.resultLoading||o.weatherLoading},null,8,["play"])],34)])}s(6699);var B=s(65),P=s(771);const I={ref:"svg"};function U(e,t,s,a,i,n){return(0,r.wg)(),(0,r.iD)("div",I,null,512)}var H={name:"SvgInline",props:{name:{type:String,required:!0}},mounted(){try{const e=new DOMParser,t=s(2517)(`./${this.name}.svg`),r=e.parseFromString(t,"text/html"),a=r.getElementsByTagName("svg")[0];for(const s of this.$refs.svg.attributes)a.setAttribute(s.name,s.value);this.$refs.svg.replaceWith(a)}catch(e){console.error(e)}}};const F=(0,p.Z)(H,[["render",U]]);var Y=F,Z=s(2219),X={name:"SearchForm",components:{SvgInline:Y,LoaderPointsLine:P.Z},props:{mobileResultStatic:{type:Boolean,default:!1}},data(){return{inputValueTemp:"",inputFocus:!1,resultData:[],activeResult:-1,resultLoading:!1,weatherLoading:!1,lastDateSearchCity:0,errorTextApi:"",errorLastEvent:"",errorEvents:["focus","blur","submit","input","api-response-error","close-error"]}},computed:{...(0,B.Se)({store_weatherList:"weather/list",store_maxWeatherCard:"settings/maxWeatherCard"}),isLimitWeatherCards(){return this.store_weatherList.length===this.store_maxWeatherCard},isOpenResult(){return this.inputFocus&&!(!this.resultData.length&&!this.errorText)},inputReadOnly(){return this.inputFocus&&this.isLimitWeatherCards},ERROR_MESSAGES(){return{DEFAULT:"",API_RESPONSE_ERROR:this.errorTextApi,...Z.Z.SEARCH_FORM}},errorText(){const e={["MAX_WEATHER_CARD"]:this.inputFocus&&this.isLimitWeatherCards,["EMPTY_REQUEST"]:"submit"===this.errorLastEvent&&!this.inputReadOnly&&-1===this.activeResult&&!this.$refs.input.value,["NOT_SELECTED"]:"submit"===this.errorLastEvent&&!this.inputReadOnly&&this.$refs.input.value&&this.resultData.length,["API_RESPONSE_ERROR"]:"api-response-error"===this.errorLastEvent,["DEFAULT"]:!0},t=Object.keys(e).find((t=>e[t]));return this.ERROR_MESSAGES[t]}},methods:{...(0,B.nv)({store_citySearch:"city/search",store_weatherAdd:"weather/add"}),setErrorLastEvent(e){this.errorEvents.includes(e)&&(this.errorLastEvent=e)},eventPreHandler(e,t){this.setErrorLastEvent(e.type),"function"===typeof t&&t(e)},eventFocus(e){this.inputFocus=!0,this.$refs.input.value&&!this.resultData.length&&this.searchCity(this.$refs.input.value)},eventBlur(e){this.inputFocus=!1},eventInput(e){this.inputValueTemp=this.$refs.input.value,this.activeResult=-1,this.$refs.input.value.length?this.searchCity(this.$refs.input.value):this.resultData.length=0},eventArrowUp(e){this.activeResult+=-1===this.activeResult?this.resultData.length:-1,this.setResultToInput()},eventArrowDown(e){this.activeResult+=this.activeResult===this.resultData.length-1?-this.resultData.length:1,this.setResultToInput()},eventResultMousemove(e){"city"===e.target.dataset.type&&(this.activeResult=Number(e.target.dataset.index))},eventResultMouseout(e){this.activeResult=-1},eventResultMousedown(e){const t=e.target.dataset.type;"city"===t&&this.eventSubmit(e),"error-close"===t&&this.closeErrorMessage()},eventSubmit(e){-1!==this.activeResult?(this.setResultToInput(),this.addWeather()):this.$refs.input.value&&!this.resultData.length&&this.searchCity(this.$refs.input.value)},eventApiResponse(e,t){"error"===e&&(this.errorTextApi=t,this.setErrorLastEvent("api-response-error"))},closeErrorMessage(){this.setErrorLastEvent("close-error"),this.resultData.length||this.$refs.input.blur()},setResultToInput(){this.$refs.input.value=-1===this.activeResult?this.inputValueTemp:this.resultData[this.activeResult].name},searchCity(e){const t=Date.now();this.lastDateSearchCity=t,this.resultLoading=!0,setTimeout((()=>{t===this.lastDateSearchCity&&this.store_citySearch(e).then((e=>{this.$refs.input.value.length&&t===this.lastDateSearchCity&&(this.resultData=e)})).catch((e=>{this.$refs.input.value.length&&t===this.lastDateSearchCity&&(this.resultData.length=0,this.eventApiResponse("error",e))})).finally((()=>{t===this.lastDateSearchCity&&(this.resultLoading=!1)}))}),1e3)},addWeather(){this.$refs.input.blur(),this.weatherLoading=!0,this.store_weatherAdd(this.resultData[this.activeResult]).then((e=>{this.$refs.input.value="",this.inputValueTemp="",this.activeResult=-1,this.resultData.length=0})).catch((e=>{this.activeResult=-1,this.$refs.input.value=this.inputValueTemp,this.$refs.input.disabled=!1,this.$refs.input.focus(),this.eventApiResponse("error",e)})).finally((()=>{this.weatherLoading=!1}))}}};const V=(0,p.Z)(X,[["render",k]]);var q=V,K={name:"WelcomeCard",components:{SearchForm:q},computed:{...(0,B.Se)({store_userSettings:"settings/userSettings"}),searchServicesCurrent(){return this.store_userSettings.searchServices.current},searchServicesPath(){return this.store_userSettings.searchServices.path},searchServicesOptions(){const{symbol:e,types:t}=this.store_userSettings.searchServices;return[{name:e.yandex,value:t.yandex},{name:e.openweathermap,value:t.openweathermap}]}},methods:{...(0,B.nv)({store_changeUserSetting:"settings/changeUserSetting"})}};const j=(0,p.Z)(K,[["render",$]]);var N=j;const G={class:"weather-card-list"};function Q(e,t,s,n,o,h){const c=(0,r.up)("weather-card");return(0,r.wg)(),(0,r.iD)("div",G,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.store_weatherList,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.id,class:(0,a.C_)(["weather-card-list__item",{active:t.id===e.store_weatherActiveID}]),style:(0,a.j5)(o.animationIsAllowed?"":"animation-duration: unset"),weather:t,onAnimationend:(0,i.iM)(h.animationend,["self"])},null,8,["class","style","weather","onAnimationend"])))),128))])}const J={class:"weather",ref:"card"},ee={class:"weather__content"},te={class:"weather__forecast",ref:"forecast"},se={class:"weather__forecast-items",ref:"forecastItems"};function re(e,t,s,a,n,o){const h=(0,r.up)("weather-card-current"),c=(0,r.up)("weather-card-future"),l=(0,r.up)("weather-card-forecast"),u=(0,r.up)("scroll-container");return(0,r.wg)(),(0,r.iD)("div",J,[(0,r._)("div",ee,[(0,r.Wm)(h,{class:"weather__content-item",weather:s.weather,isActive:n.timestamp===s.weather.current.timestamp&&n.enableChangeDay&&s.weather.id===e.store_weatherActiveID},null,8,["weather","isActive"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.weather.forecast,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.timestamp,class:"weather__content-item",timestamp:t.timestamp,weather:t,id:s.weather.id,city:s.weather.city,isActive:n.timestamp===t.timestamp&&n.enableChangeDay&&s.weather.id===e.store_weatherActiveID},null,8,["timestamp","weather","id","city","isActive"])))),128))]),(0,r._)("div",te,[(0,r.Wm)(u,{"class-bar-x":"weather__forecast-scrollbar-x",onScroll:o.handlerScrollForecast,ref:"forecastScrollContainer"},{default:(0,r.w5)((()=>[(0,r._)("div",se,[(0,r.Wm)(l,{class:"weather__forecast-item",name:"Сейчас",date:s.weather.current.date.monthday,icon:s.weather.current.icon,"temp-max":s.weather.current.temp,isActive:n.timestamp===s.weather.current.timestamp&&s.weather.id===e.store_weatherActiveID,isActiveIcon:s.weather.id===e.store_weatherActiveID,onClick:t[0]||(t[0]=e=>o.changeDay(s.weather.current.timestamp))},null,8,["date","icon","temp-max","isActive","isActiveIcon"]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.weather.forecast,(t=>((0,r.wg)(),(0,r.j4)(l,{key:t.timestamp,class:"weather__forecast-item",name:t.date.weekday,date:t.date.monthday,icon:t.icon,"temp-min":t.tempMin,"temp-max":t.tempMax,isActive:n.timestamp===t.timestamp&&s.weather.id===e.store_weatherActiveID,isActiveIcon:s.weather.id===e.store_weatherActiveID,onMousedown:(0,i.iM)((e=>o.changeDay(t.timestamp)),["left"])},null,8,["name","date","icon","temp-min","temp-max","isActive","isActiveIcon","onMousedown"])))),128))],512)])),_:1},8,["onScroll"]),(0,r._)("div",{class:"weather__forecast-arrow-left","data-arrow":"left",onClick:t[1]||(t[1]=(...e)=>o.handlerArrowForecast&&o.handlerArrowForecast(...e)),ref:"forecastArrowLeft"},null,512),(0,r._)("div",{class:"weather__forecast-arrow-right","data-arrow":"right",onClick:t[2]||(t[2]=(...e)=>o.handlerArrowForecast&&o.handlerArrowForecast(...e)),ref:"forecastArrowRight"},null,512)],512)],512)}const ae={class:"weather-future",ref:"card"},ie={class:"weather-future__header",ref:"title"},ne={class:"weather-future__info"},oe={class:"weather-future__info-city"},he={class:"weather-future__info-date"},ce={class:"weather-future__content"},le={class:"weather-future__periods"},ue=["data-period"],de={class:"weather-future__summary-title"},me={class:"weather-future__summary-temp"},we={class:"weather-future__summary-temp-min"},ve={class:"weather-future__summary-temp-max"},pe={class:"weather-future__summary-desc"},_e={class:"weather-future__summary-icon"},fe=["data-period"],ge={class:"weather-future__details-wrapper"},ye={class:"weather-future__details-content"},be={class:"weather-future__detail-time"},Se={class:"weather-future__detail-name"},Ce={class:"weather-future__detail-value"},De={class:"weather-future__summary-back",ref:"summaryBack"},Le={class:"weather-future__detail-back",ref:"detailsBack"};function $e(e,t,s,i,n,o){const h=(0,r.up)("button-menu"),c=(0,r.up)("weather-icon"),l=(0,r.up)("scroll-container");return(0,r.wg)(),(0,r.iD)("div",ae,[(0,r._)("div",ie,[(0,r._)("div",ne,[(0,r._)("div",oe,(0,a.zw)(o.weatherInfo.city),1),(0,r._)("div",he,(0,a.zw)(o.weatherInfo.date),1)]),(0,r.Wm)(h)],512),(0,r._)("div",ce,[(0,r._)("div",le,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.weather.periods,(e=>((0,r.wg)(),(0,r.iD)(r.HY,{key:e.timestamp},[(0,r._)("div",{class:(0,a.C_)(["weather-future__summary",{active:n.activePeriod===e.name}]),"data-period":e.name,ref_for:!0,ref:n.activePeriod===e.name?"summaryActive":"summary",onClick:t[0]||(t[0]=(...e)=>o.changePeriod&&o.changePeriod(...e))},[(0,r._)("div",de,(0,a.zw)(e.name),1),(0,r._)("div",me,[(0,r._)("span",we,(0,a.zw)(e.tempMin)+"°",1),(0,r._)("span",ve,(0,a.zw)(e.tempMax)+"°",1)]),(0,r._)("div",pe,(0,a.zw)(e.description),1),(0,r._)("div",{class:(0,a.C_)(["weather-future__summary-arrow",{active:n.summaryButtons[e.name]}])},null,2),(0,r._)("div",_e,[(0,r.Wm)(c,{class:"weather-future__summary-canvas",code:e.icon,animate:s.isActive},null,8,["code","animate"])])],10,ue),(0,r._)("div",{class:"weather-future__details","data-period":e.name,ref_for:!0,ref:"details"},[(0,r._)("div",ge,[(0,r.Wm)(l,{"class-bar-y":"weather-future__details-scrollbar-y"},{default:(0,r.w5)((()=>[(0,r._)("div",ye,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.timeList,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.time,class:"weather-future__detail"},[(0,r._)("div",be,(0,a.zw)(e.time),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.detailsPeriod,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.name,class:"weather-future__detail-item"},[(0,r._)("div",Se,(0,a.zw)(t.name),1),(0,r._)("div",Ce,(0,a.zw)(e[t.value]+t.symbol),1)])))),128))])))),128))])])),_:2},1024)])],8,fe)],64)))),128)),(0,r._)("div",De,null,512),(0,r._)("div",Le,null,512)])])],512)}const xe=(0,r._)("div",{class:"button-menu__item"},null,-1),Me=[xe];function We(e,t,s,a,i,n){return(0,r.wg)(),(0,r.iD)("div",{class:"button-menu",onClick:t[0]||(t[0]=(...e)=>n.handler&&n.handler(...e))},Me)}var Ae={name:"ButtonMenu",methods:{handler(){this.$emitter.emit("menu-open")}}};const Re=(0,p.Z)(Ae,[["render",We]]);var Ee=Re,Te=(s(5438),{distance(e,t={x:0,y:0}){return Math.hypot(e.x-t.x,e.y-t.y)},getRandomInRange(e,t,s){return 1*(Math.random()*(t-e)+e).toFixed(s)},randomInteger(e,t){return Math.floor(e+Math.random()*(t+1-e))},arrShuffle(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},getUniqueID(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}}),ze={name:"WeatherCardFuture",components:{ScrollContainer:f,ButtonMenu:Ee},props:{weather:{type:Object,required:!0},id:{type:String,required:!0},city:{type:Object,required:!0},timestamp:{required:!0},isActive:{default:!0}},data(){return{activePeriod:!1,summaryButtons:{}}},computed:{...(0,B.Se)({store_symbolsOfCurrentUserSettings:"settings/symbolsOfCurrentUserSettings"}),weatherInfo(){const{date:e}=this.weather;return{city:this.city.name,date:`${e.weekday}, ${e.monthday} ${e.year}`}},detailsPeriod(){const{windSpeed:e,pressure:t,visibility:s}=this.store_symbolsOfCurrentUserSettings.weatherUnits;return[{name:"Температура",value:"temp",symbol:"°"},{name:"Ощущается",value:"tempFeelsLike",symbol:"°"},{name:"Ветер",value:"windSpeed",symbol:" "+e},{name:"Давление",value:"pressure",symbol:" "+t},{name:"Влажность",value:"humidity",symbol:"%"},{name:"Видимость",value:"visibility",symbol:" "+s},{name:"Облачность",value:"clouds",symbol:"%"}]}},methods:{animate({show:e,direction:t}){const{card:s,title:r,summary:a,summaryActive:i,summaryBack:n,details:o,detailsBack:h}=this.$refs,c=o.find((e=>e.dataset.period===this.activePeriod)),l=Te.arrShuffle([r,...a]),u=window.innerWidth>=560?[i,c,h,n]:[i,c],d=.3/l.length,m=t?0:d,v=t?.3:0,p=e?.7:0,_=w.ZP.timeline({defaults:{duration:.6,ease:e?"power1.out":"power1.in",x:t?s.clientWidth:-s.clientWidth}});_.set(s,{x:200*(!t-.5)*!e+"%"}),_.from(l,{stagger:d,delay:p+m},0),_.from(u,{delay:p+v},0),e&&_.call((()=>this.$emitter.emit("weather-card__day-is-changing",e)))},changePosition({prev:e,next:t,direction:s}){this.summaryButtons[this.activePeriod]=!1,t===this.timestamp&&this.animate({show:!0,direction:s}),e===this.timestamp&&this.animate({show:!1,direction:s})},changePeriod(e){this.activePeriod=e.target.dataset.period;for(const t in this.summaryButtons)this.summaryButtons[t]=t===this.activePeriod&&!this.summaryButtons[t]},periodsToggle(e,t){const s=this.$refs.details.find((t=>t.dataset.period===e)),r=()=>{t?s.classList.add("active-mobile"):s.classList.remove("active-mobile"),this.$refs.details.forEach((e=>{e.dataset.period===this.activePeriod?e.classList.add("active"):e.classList.remove("active")})),s.style.removeProperty("height")};window.innerWidth>=560?r():w.ZP.to(s,{duration:.5,ease:"sine.out",height:t?"auto":0,onComplete:r})}},mounted(){this.$emitter.on(`weather-card__change-day_${this.id}`,this.changePosition),this.activePeriod=this.weather.periods[2].name,this.weather.periods.forEach((e=>{this.summaryButtons[e.name]=!1,this.$watch(`summaryButtons.${e.name}`,(t=>this.periodsToggle(e.name,t)))})),this.$refs.details[2].classList.add("active")},beforeUnmount(){this.$emitter.off(`weather-card__change-day_${this.id}`,this.changePosition)}};const Oe=(0,p.Z)(ze,[["render",$e]]);var ke=Oe;const Be={class:"weather-current",ref:"card"},Pe={class:"weather-current__header",ref:"info"},Ie={class:"weather-current__info"},Ue={class:"weather-current__info-time"},He={class:"weather-current__info-city"},Fe={class:"weather-current__info-date"},Ye={class:"weather-current__content"},Ze={class:"weather-current__temp",ref:"temp"},Xe={class:"weather-current__temp-value"},Ve={class:"weather-current__temp-buttons"},qe=["onClick"],Ke={class:"weather-current__temp-condition"},je={class:"weather-current__props",ref:"props"},Ne={class:"weather-current__prop-name"},Ge={class:"weather-current__prop-value"};function Qe(e,t,s,i,n,o){const h=(0,r.up)("button-menu"),c=(0,r.up)("weather-icon");return(0,r.wg)(),(0,r.iD)("div",Be,[(0,r._)("div",Pe,[(0,r._)("div",Ie,[(0,r._)("div",Ue,(0,a.zw)(o.weatherInfo.time),1),(0,r._)("div",He,(0,a.zw)(o.weatherInfo.city),1),(0,r._)("div",Fe,(0,a.zw)(o.weatherInfo.date),1)]),(0,r.Wm)(h)],512),(0,r._)("div",Ye,[(0,r._)("div",Ze,[(0,r.Wm)(c,{class:"weather-current__temp-icon",code:s.weather.current.icon,animate:s.isActive},null,8,["code","animate"]),(0,r._)("div",Xe,(0,a.zw)(s.weather.current.temp)+"°",1),(0,r._)("div",Ve,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tempUnitButtons,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["weather-current__temp-button",{active:t.value===e.store_userSettings.weatherUnits.temp.current}]),onClick:s=>e.store_changeUserSetting({path:"weatherUnits/temp",value:t.value})},(0,a.zw)(t.name),11,qe)))),256))]),(0,r._)("div",Ke,(0,a.zw)(s.weather.current.description),1)],512),(0,r._)("div",je,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.weatherProps,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.name,class:"weather-current__prop"},[(0,r._)("div",Ne,(0,a.zw)(e.name),1),(0,r._)("div",Ge,(0,a.zw)(e.value),1)])))),128))],512)])],512)}s(4916),s(5306);var Je={name:"WeatherCardCurrent",components:{ButtonMenu:Ee},props:{weather:{type:Object,required:!0},isActive:{type:Boolean,required:!1}},computed:{...(0,B.Se)({store_userSettings:"settings/userSettings",store_symbolsOfCurrentUserSettings:"settings/symbolsOfCurrentUserSettings"}),tempUnitButtons(){const e=this.store_userSettings.weatherUnits.temp;return[{name:e.symbol.metric,value:e.types.metric},{name:e.symbol.imperial,value:e.types.imperial}]},weatherInfo(){const{city:e}=this.weather,{time:t,date:s}=this.weather.current;return{time:t,city:e.name,date:`${s.weekday}, ${s.monthday} ${s.year}`}},weatherProps(){const{tempFeelsLike:e,windSpeed:t,pressure:s,humidity:r,visibility:a,clouds:i}=this.weather.current,n=this.store_symbolsOfCurrentUserSettings.weatherUnits,o=n.pressure.replace("мм рт.ст.","мм");return[{name:"Ощущается",value:e+"°"},{name:"Ветер",value:t+" "+n.windSpeed},{name:"Давление",value:s+" "+o},{name:"Влажность",value:r+"%"},{name:"Видимость",value:a+" "+n.visibility},{name:"Облачность",value:i+"%"}]}},methods:{...(0,B.nv)({store_changeUserSetting:"settings/changeUserSetting"}),animate({show:e,direction:t}){const{card:s,temp:r,props:a,info:i}=this.$refs,n=[r,a,i],o=w.ZP.timeline();o.set(s,{x:200*(!t-.5)*!e+"%"}),o.from(n,{x:t?s.clientWidth:-s.clientWidth,duration:.6,stagger:.15,delay:e?.7:0,ease:e?"power1.out":"power1.in"}),e&&o.call((()=>this.$emitter.emit("weather-card__day-is-changing",e)))},changePosition({prev:e,next:t,direction:s}){const{timestamp:r}=this.weather.current;t===r&&this.animate({show:!0,direction:s}),e===r&&this.animate({show:!1,direction:s})}},mounted(){this.$emitter.on(`weather-card__change-day_${this.weather.id}`,this.changePosition)},beforeUnmount(){this.$emitter.off(`weather-card__change-day_${this.weather.id}`,this.changePosition)}};const et=(0,p.Z)(Je,[["render",Qe]]);var tt=et;const st={class:"weather-forecast__name"},rt={class:"weather-forecast__date"},at={class:"weather-forecast__icon"},it={class:"weather-forecast__temp"},nt={key:0,class:"weather-forecast__temp-min"},ot={class:"weather-forecast__temp-max"};function ht(e,t,s,i,n,o){const h=(0,r.up)("weather-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["weather-forecast",{active:s.isActive}])},[(0,r._)("div",st,(0,a.zw)(s.name),1),(0,r._)("div",rt,(0,a.zw)(s.date),1),(0,r._)("div",at,[(0,r.Wm)(h,{class:"weather-forecast__icon-canvas",code:s.icon,animate:this.isActiveIcon},null,8,["code","animate"])]),(0,r._)("div",it,[s.tempMin?((0,r.wg)(),(0,r.iD)("div",nt,(0,a.zw)(s.tempMin),1)):(0,r.kq)("",!0),(0,r._)("div",ot,(0,a.zw)(s.tempMax),1)])],2)}var ct={name:"WeatherCardForecast",props:{name:{type:String,required:!0},date:{type:String,required:!0},icon:{type:String,required:!0},tempMin:{type:String,default:""},tempMax:{type:String,required:!0},isActive:{type:Boolean,default:!1},isActiveIcon:{type:Boolean,default:!1}}};const lt=(0,p.Z)(ct,[["render",ht]]);var ut=lt,dt={name:"WeatherCard",components:{ScrollContainer:f,WeatherCardFuture:ke,WeatherCardCurrent:tt,WeatherCardForecast:ut},props:{weather:{type:Object,required:!0}},data(){return{timestamp:null,enableChangeDay:!0}},computed:{...(0,B.Se)({store_weatherActiveID:"weather/activeID"})},methods:{handlerScrollForecast(){const e=this.$refs.forecastScrollContainer.getScroll();e.x>0?this.$refs.forecastArrowLeft.classList.add("active"):this.$refs.forecastArrowLeft.classList.remove("active"),e.x<this.$refs.forecastItems.clientWidth-this.$refs.forecastScrollContainer.$el.clientWidth?this.$refs.forecastArrowRight.classList.add("active"):this.$refs.forecastArrowRight.classList.remove("active")},handlerArrowForecast(e){if(!e.target.dataset.hasOwnProperty("arrow"))return;const t=e.target.dataset.arrow,s=this.$refs.forecastItems.clientWidth/(this.weather.forecast.length+1)+2;this.$refs.forecastScrollContainer.scrollBy("left"===t?-s:s,0)},changeDay(e){this.enableChangeDay&&this.timestamp!==e&&(this.$emitter.emit(`weather-card__change-day_${this.weather.id}`,{prev:this.timestamp,next:e,direction:e>this.timestamp}),this.timestamp=e,this.setEnableChangeDay(!1))},setEnableChangeDay(e){this.enableChangeDay=e}},mounted(){this.$emitter.on("weather-card__day-is-changing",this.setEnableChangeDay),this.timestamp=this.weather.current.timestamp,window.addEventListener("resize",this.handlerScrollForecast),this.handlerScrollForecast()},beforeUnmount(){this.$emitter.off("weather-card__day-is-changing",this.setEnableChangeDay),this.$emitter.all.delete(`weather-card__change-day_${this.weather.id}`),window.removeEventListener("resize",this.handlerScrollForecast)}};const mt=(0,p.Z)(dt,[["render",re]]);var wt=mt,vt={name:"WeatherCardList",components:{WeatherCard:wt},data(){return{cityIsChanging:!1,animationIsAllowed:!1}},computed:{...(0,B.Se)({store_weatherList:"weather/list",store_weatherActiveID:"weather/activeID"})},methods:{...(0,B.nv)({store_weatherRemove:"weather/remove",store_weatherChange:"weather/change",store_weatherAddBasket:"weather/addBasket",store_weatherClearBasket:"weather/clearBasket"}),animationend(e){this.cityIsChanging=!1,this.store_weatherClearBasket()},handlerWeatherChange(e){this.cityIsChanging||(this.store_weatherChange(e),this.$emitter.emit("menu-close"))},handlerWeatherRemove(e){if(1===this.store_weatherList.length)this.$emitter.emit("weather-remove-last",e);else if(e===this.store_weatherActiveID){const t=this.store_weatherList.find((e=>e.id!==this.store_weatherActiveID));this.store_weatherAddBasket(e),this.store_weatherChange(t.id)}else this.store_weatherRemove(e)}},mounted(){this.$emitter.on("weather-change",this.handlerWeatherChange),this.$emitter.on("weather-remove",this.handlerWeatherRemove)},beforeUnmount(){this.$emitter.off("weather-change",this.handlerWeatherChange),this.$emitter.off("weather-remove",this.handlerWeatherRemove)},watch:{store_weatherActiveID(e,t){this.animationIsAllowed=this.cityIsChanging=!(!e||!t)}}};const pt=(0,p.Z)(vt,[["render",Q]]);var _t=pt;const ft={class:"menu__wrapper"},gt={class:"menu__wrapper-content"},yt={class:"menu__btn-close"},bt={class:"menu__content"},St={class:"menu__scroll-content"},Ct={class:"menu__cities",ref:"cities"};function Dt(e,t,s,n,o,h){const c=(0,r.up)("svg-inline"),l=(0,r.up)("search-form"),u=(0,r.up)("card-settings"),d=(0,r.up)("menu-city-button"),m=(0,r.up)("scroll-container");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["menu",{active:o.isOpen}])},[(0,r._)("div",ft,[(0,r._)("div",{class:"menu__back",onClick:t[0]||(t[0]=(...e)=>h.close&&h.close(...e))}),(0,r._)("div",gt,[(0,r._)("div",yt,[(0,r.Wm)(c,{name:"close"})]),(0,r._)("div",bt,[(0,r.Wm)(m,{"class-wrapper":"menu__scroll-wrapper","class-inner":"menu__scroll-inner","show-bar":!1},{default:(0,r.w5)((()=>[(0,r._)("div",St,[(0,r.Wm)(l,{class:"menu__search"}),(0,r.Wm)(u,{class:"menu__settings"}),(0,r._)("div",Ct,[(0,r.Wm)(i.W3,{name:"menu__cities",onBeforeEnter:h.before,onBeforeLeave:h.before,onEnter:h.onEnter,onLeave:h.onLeave},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.store_weatherList,(t=>((0,r.wg)(),(0,r.j4)(d,{key:t.id,weather:t,"is-active":t.id===e.store_weatherActiveID},null,8,["weather","is-active"])))),128))])),_:1},8,["onBeforeEnter","onBeforeLeave","onEnter","onLeave"])],512)])])),_:1})])])])],2)}const Lt={class:"card-settings__wrapper",ref:"wrapper"},$t={class:"card-settings__wrapper-view"},xt={class:"card-settings__inner",ref:"inner"},Mt={class:"card-settings__head"},Wt=(0,r._)("div",{class:"card-settings__title"},"Настройки",-1),At={class:"card-settings__options"},Rt={class:"card-settings__switch"},Et=["onClick"];function Tt(e,t,s,n,o,h){const c=(0,r.up)("svg-inline");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["card-settings",{active:o.isOpen||o.isAnimateClose}]),tabindex:"-1",onBlur:t[2]||(t[2]=(0,i.iM)(((...e)=>h.close&&h.close(...e)),["self"]))},[(0,r._)("div",Lt,[(0,r._)("div",$t,[(0,r._)("div",xt,[(0,r._)("div",Mt,[(0,r._)("div",{class:"card-settings__icon-open",ref:"btnOpen",onClick:t[0]||(t[0]=(...e)=>h.open&&h.open(...e))},[(0,r.Wm)(c,{name:"settings"})],512),Wt,(0,r._)("div",{class:"card-settings__icon-close",onClick:t[1]||(t[1]=(...e)=>h.close&&h.close(...e))},[(0,r.Wm)(c,{name:"close"})])]),(0,r._)("div",At,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.options,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.name,class:"card-settings__option"},[(0,r._)("div",{class:"card-settings__option-name",ref_for:!0,ref:"optionsName"},(0,a.zw)(e.name),513),(0,r._)("div",{class:"card-settings__option-value",ref_for:!0,ref:"optionsValue"},[(0,r._)("div",Rt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.switch,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.name,class:(0,a.C_)(["card-settings__switch-btn",{active:e.value===t.value}]),onClick:s=>h.changeSetting(e.path,t.value)},(0,a.zw)(t.name),11,Et)))),128))])],512)])))),128))])],512)])],512)],34)}var zt={name:"CardSettings",components:{SvgInline:Y},data(){return{isOpen:!1,isAnimateClose:!1}},computed:{...(0,B.Se)({store_userSettings:"settings/userSettings"}),options(){const{temp:e,pressure:t,windSpeed:s,visibility:r}=this.store_userSettings.weatherUnits,a=this.store_userSettings.searchServices,i=(e,t)=>({name:e,path:t.path,value:t.current,switch:Object.keys(t.types).map((e=>({name:t.symbol[e],value:t.types[e]})))});return[i("Единица измерения температуры",e),i("Единица измерения атмосферного давления",t),i("Единица измерения скорости ветра",s),i("Единица измерения видимости",r),i("Сервис поиска",a)]}},methods:{...(0,B.nv)({store_changeUserSetting:"settings/changeUserSetting"}),changeSetting(e,t){this.store_changeUserSetting({path:e,value:t})},open(){if(this.isOpen)return;this.isOpen=!0;const{wrapper:e,inner:t,btnOpen:s,optionsName:r,optionsValue:a}=this.$refs,i=w.ZP.timeline({defaults:{ease:"sine.out"}});i.set(r,{translateX:-t.clientWidth+"px"}),i.set(a,{translateX:t.clientWidth+"px"}),i.to(e,{duration:.6,width:"auto",height:"auto"},0),i.to(s,{duration:.6,width:"60px",height:"100%"},0),i.to(r,{duration:.6,translateX:"0",stagger:.1},.1),i.to(a,{duration:.6,translateX:"0",stagger:.1},.1)},close(){if(!this.isOpen)return;this.isOpen=!1,this.isAnimateClose=!0;const{wrapper:e,inner:t,btnOpen:s,optionsName:r,optionsValue:a}=this.$refs,i=.1*r.length,n=w.ZP.timeline({defaults:{ease:"sine.out"},onComplete:()=>{this.isAnimateClose=!1}});n.to(r,{duration:.8,translateX:-t.clientWidth+"px",stagger:.1},0),n.to(a,{duration:.8,translateX:t.clientWidth+"px",stagger:.1},0),n.to(e,{duration:.6,width:"100%",height:"100%"},i),n.to(s,{duration:.6,width:"80px",height:"100%"},i),n.set([e,r,a,s],{clearProps:"all"})}}};const Ot=(0,p.Z)(zt,[["render",Tt]]);var kt=Ot;const Bt={class:"city-button__name"},Pt={class:"city-button__desc"},It={class:"city-button__temp"},Ut={class:"city-button__icon"},Ht={class:"city-button__delete-button","data-type":"remove"};function Ft(e,t,s,n,o,h){const c=(0,r.up)("weather-icon"),l=(0,r.up)("svg-inline");return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["city-button",{active:s.isActive}]),onMousedown:t[0]||(t[0]=(0,i.iM)(((...e)=>h.handler&&h.handler(...e)),["left"]))},[(0,r._)("div",Bt,(0,a.zw)(s.weather.city.name),1),(0,r._)("div",Pt,(0,a.zw)(s.weather.current.description),1),(0,r._)("div",It,(0,a.zw)(s.weather.current.temp)+"°",1),(0,r._)("div",Ut,[(0,r.Wm)(c,{code:s.weather.current.icon},null,8,["code"])]),(0,r._)("div",Ht,[(0,r.Wm)(l,{name:"close"})])],34)}var Yt={name:"MenuCityButton",components:{SvgInline:Y},props:{weather:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},data(){return{removed:!1}},methods:{handler(e){this.removed||("remove"===e.target.dataset.type?this.remove():this.change())},change(){this.$emitter.emit("weather-change",this.weather.id)},remove(){this.$emitter.emit("weather-remove",this.weather.id),this.removed=!0}}};const Zt=(0,p.Z)(Yt,[["render",Ft]]);var Xt=Zt,Vt={name:"WeatherMenu",components:{SvgInline:Y,ScrollContainer:f,MenuCityButton:Xt,CardSettings:kt,SearchForm:q},data(){return{isOpen:!1}},computed:{...(0,B.Se)({store_weatherList:"weather/list",store_weatherActiveID:"weather/activeID"})},methods:{open(){this.isOpen=!0},close(){this.isOpen=!1},before(){w.ZP.set(this.$refs.cities,{height:this.$refs.cities.clientHeight})},onLeave(e,t){const s=e.getBoundingClientRect(),r=this.$refs.cities.getBoundingClientRect();w.ZP.timeline({defaults:{duration:.8},onComplete:t}).fromTo(e,{position:"absolute",top:s.top-r.top,left:s.left-r.left,width:s.width,height:s.height},{scale:.5,opacity:0}).to(this.$refs.cities,{height:"auto",clearProps:!0},0)},onEnter(e,t){if(1===this.store_weatherList.length)return w.ZP.set(this.$refs.cities,{clearProps:"all"}),void t();w.ZP.timeline({defaults:{duration:.8},onComplete:t}).fromTo(e,{scale:.5,opacity:0,animationIterationCount:0},{scale:1,opacity:1,clearProps:!0}).to(this.$refs.cities,{height:"auto",clearProps:!0},0)}},mounted(){this.$emitter.on("menu-open",this.open),this.$emitter.on("menu-close",this.close)},beforeUnmount(){this.$emitter.off("menu-open",this.open),this.$emitter.off("menu-close",this.close)}};const qt=(0,p.Z)(Vt,[["render",Dt]]);var Kt=qt,jt={data(){return{pageLoader_showPage:!1}},methods:{pageLoader_setLoadedLoader(e){this.pageLoader_showPage=e},pageLoader_beforeRouteLeave(e,t,s){this.pageLoader_setLoadedLoader(!1),this.$emitter.emit("page-loader__page-loaded",!1),s()}},mounted(){this.$emitter.on("page-loader__loader-loaded",this.pageLoader_setLoadedLoader)},beforeUnmount(){this.$emitter.off("page-loader__loader-loaded",this.pageLoader_setLoadedLoader)}},Nt=s(7071),Gt={name:"HomePage",components:{ScrollContainer:f,WelcomeCard:N,WeatherCardList:_t,WeatherMenu:Kt},mixins:[jt],computed:{...(0,B.Se)({store_weatherList:"weather/list",store_weatherBasket:"weather/basket"}),numWeatherCards(){return this.store_weatherList.length-this.store_weatherBasket.length},welcomeClasses(){return{active:!this.numWeatherCards&&this.pageLoader_showPage}},weatherClasses(){return{active:this.numWeatherCards&&this.pageLoader_showPage}}},methods:{...(0,B.nv)({store_weatherAddBasket:"weather/addBasket",store_weatherClearBasket:"weather/clearBasket"}),handlerWeatherLeftTransitionend(e){"opacity"===e.propertyName&&this.store_weatherClearBasket()},handlerWeatherRemoveLast(e){this.$emitter.emit("menu-close"),this.store_weatherAddBasket(e)}},mounted(){this.$emitter.on("weather-remove-last",this.handlerWeatherRemoveLast),this.$emitter.emit("page-loader__page-loaded",!0)},beforeUnmount(){this.$emitter.off("weather-remove-last",this.handlerWeatherRemoveLast)},beforeRouteEnter(e,t,s){Nt.Z.getters["localstorage/loaded"]?s():Nt.Z.dispatch("localstorage/init").then((()=>s()))},beforeRouteLeave(e,t,s){this.pageLoader_beforeRouteLeave(e,t,s)}};const Qt=(0,p.Z)(Gt,[["render",l]]);var Jt=Qt},2517:function(e,t,s){var r={"./close.svg":9383,"./search.svg":5055,"./settings.svg":2869};function a(e){var t=i(e);return s(t)}function i(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=2517}}]);
//# sourceMappingURL=234.23948130.js.map